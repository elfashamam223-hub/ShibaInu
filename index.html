<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shiba Inu Rewards</title>
<style>
body { font-family: Arial, sans-serif; text-align: center; background: #f5f5f5; }
h1, h2 { color: #d35400; }
button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; }
#loginPage, #dashboard { max-width: 400px; margin: auto; padding: 20px; background: white; border-radius: 10px; }
input { width: 90%; padding: 10px; margin: 5px; border: 1px solid #ccc; border-radius: 5px; }
</style>
</head>
<body>

<!-- LOGIN PAGE -->
<div id="loginPage">
    <h1>Login</h1>
    <input type="text" id="loginName" placeholder="Your Name">
    <input type="email" id="loginEmail" placeholder="Binance/FaucetPay Email">
    <button onclick="loginUser()">Start</button>
</div>

<!-- DASHBOARD -->
<div id="dashboard" style="display:none;">
    <h1>üêï Shiba Inu Mining</h1>
    <h2>Welcome, <span id="userNameDisplay"></span></h2>
    <p>Balance: <span id="userBalance">0</span> SHIB</p>
    <button id="watchAdBtn">Watch Ad (+8 SHIB)</button>
    <h3>Top 10 Earners</h3>
    <ul id="top10"></ul>
    <button id="withdrawBtn">Withdraw</button>
</div>

<script src="https://example.com/monetag.js"></script> <!-- Script iklan Monetag -->
<script>
const APPS_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwJjRhkcl-gEYqcWsaSvAiVL8HE22SvCJfEG1ON9AIIFeg66VX0tVufw1wfMQ1L417v/exec";
const SECRET_KEY = "Elfaidasany3";

// LOGIN USER
async function loginUser() {
    const name = document.getElementById("loginName").value.trim();
    const email = document.getElementById("loginEmail").value.trim();
    if (!name || !email) return alert("Please fill all fields.");

    localStorage.setItem("userName", name);
    localStorage.setItem("userEmail", email);

    try {
        await fetch(APPS_SCRIPT_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                secret: SECRET_KEY,
                action: "register",
                name: name,
                email: email
            })
        });
    } catch (err) {
        console.warn("API error, data will be saved locally only.");
    }

    showDashboard();
}

function showDashboard() {
    document.getElementById("loginPage").style.display = "none";
    document.getElementById("dashboard").style.display = "block";
    document.getElementById("userNameDisplay").textContent = localStorage.getItem("userName");
    loadBalance();
}

// LOAD BALANCE
async function loadBalance() {
    try {
        const res = await fetch(`${APPS_SCRIPT_URL}?action=getBalance&email=${encodeURIComponent(localStorage.getItem("userEmail"))}`);
        const data = await res.json();
        document.getElementById("userBalance").textContent = data.balance || 0;
    } catch {
        document.getElementById("userBalance").textContent = 0;
    }
}

// WATCH ADS (+8 SHIB)
document.getElementById("watchAdBtn").addEventListener("click", () => {
    show_9682710().then(async () => {
        let currentBalance = parseInt(document.getElementById("userBalance").textContent) || 0;
        currentBalance += 8;
        document.getElementById("userBalance").textContent = currentBalance;

        await fetch(APPS_SCRIPT_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                secret: SECRET_KEY,
                action: "updateBalance",
                email: localStorage.getItem("userEmail"),
                balance: currentBalance
            })
        });
    });
});

// WITHDRAW
document.getElementById("withdrawBtn").addEventListener("click", () => {
    show_9682710('pop').then(() => {
        const amount = prompt("Enter amount to withdraw (min 120 SHIB):");
        if (!amount || isNaN(amount) || amount < 120) return alert("Minimum withdraw is 120 SHIB.");

        fetch(APPS_SCRIPT_URL, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({
                secret: SECRET_KEY,
                action: "withdraw",
                name: localStorage.getItem("userName"),
                email: localStorage.getItem("userEmail"),
                amount: parseInt(amount)
            })
        }).then(() => {
            alert("Withdraw request submitted!");
            loadBalance();
        });
    });
});
</script>
</body>
</html>
